apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'
apply plugin: 'com.betomorrow.appcenter'

android {
    compileSdkVersion 29

    defaultConfig {
        applicationId "com.telefonica.mistica.app"
        minSdkVersion 21
        targetSdkVersion 29
        versionCode versionCodeDate()
        versionName "1.0.0"
    }
}

static def versionCodeDate() {
    return (new Date().toTimestamp().getTime() / 60).toInteger()
}

appcenter {
    apiToken = System.env.APPCENTER_API_TOKEN ?: ""
    ownerName = "Tuenti-Organization"
    distributionGroups = ["Public"]
    releaseNotes = "# Library version: ${version} \n See https://github.com/Telefonica/mistica-android/releases for more info."

    notifyTesters = true
    apps {
        debug {
            appName = "mistica"
        }
    }
}


dependencies {
    def appCenterSdkVersion = '3.3.0'
    implementation "com.microsoft.appcenter:appcenter-analytics:${appCenterSdkVersion}"
    implementation "com.microsoft.appcenter:appcenter-crashes:${appCenterSdkVersion}"
    implementation "com.microsoft.appcenter:appcenter-distribute:${appCenterSdkVersion}"

    implementation "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"
    implementation 'androidx.core:core-ktx:1.3.1'
    implementation "androidx.appcompat:appcompat:$support_version"
    
    implementation project(':catalog')
    implementation project(':library')

    testImplementation 'junit:junit:4.13'

}